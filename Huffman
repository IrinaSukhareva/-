#define _CRT_SECURE_NO_WARNINGS
#include <iostream>
#include <fstream>
#include <string>
#include <queue>
#include <unordered_map>
#include <map>
#include <stdio.h> 
#include <stdlib.h>
using namespace std;

struct Node{
	char letter; //буква
	unsigned int count; //кол-во встречаемости
	Node *left, *right;
};

//добавление нового узла дерева
Node* addNode(char letter, unsigned int count, Node* left, Node* right){
	Node* node = new Node();
	node->letter = letter;
	node->count = count;
	node->left = left;
	node->right = right;
return node;
}

void Huffman(const char* original = "cipher.txt", const char* cipher = "decipher.txt") {
    FILE* input;
    input = fopen(original, "r");
    if (!input) {
        puts("ERROR: cipher text does not open\n");
        exit(1);
    }
    
    //1 этап: 

	int number = 0;
	int d=fgetc(input);
	while (d != 32){
	    number=number*10 +(d-48);
	    d = fgetc(input);
	}
	cout<<number<<endl;
	int rcount = 0; 
	d = fgetc(input);
	while (d != 32){
	    rcount=rcount*10 +(d-48);
	    d = fgetc(input);
	}
	cout<<rcount<<endl;
	
	unsigned char h;
	while (h!=' ') h=fgetc(input);
	
    map<char, int>count1;//символ и его частота
    unsigned char c=' ';
    while (c==' ') {
        c= fgetc(input);
        count1[c] = fgetc(input) -48;
        c= fgetc(input);//это пробел
    }
        for (auto pair : count1) {
        cout << pair.first << " " << pair.second << '\n';
    }
        fclose(input);

    //2 этап:

    FILE* output;
    input = fopen(original, "r");
    output = fopen(cipher, "w");
    if (!input || !output){
        puts("ERROR: the texts didn't open\n"); 
        exit(1);
    }

        fprintf(output, "%c", pair.first);
        fprintf(output, "%d ", pair.second);
        }
    
 

    fclose(input);
    fclose(output);
}


int main(){
Huffman();


}
